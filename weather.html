<!DOCTYPE html>
<html lang="ko"dir="ltr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">

  <!--SEO-->
  <meta name="Author" content="#LeeSeungJu#LeeCoder">
  <meta name="robots" content="noidex, nofollow">
  <meta name="googlebot" content="noindex"/>
  <meta name="description" content="Web-Publisher Note">
  <meta name="format-detection" content="telephone=no"> <!-- 아이폰 number 버그 개선 -->
  <link rel="image_src" href="./lib/images/seo/image.png" />
  <link rel="icon" href="./lib/images/seo/favicon.png" type="image/x-icon">
  <link rel="apple-touch-icon-precomposed" href="./lib/images/seo/logo_180x180.png" />
  <title>LeeCoder's Note | Weather</title>

  <!--스크립트 CDN 및 플러그인-->
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <!-- 크로스브라우징-->
  <!--[if lt IE 9]>
    <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
    <script src="https://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
    <link rel="stylesheet" href="./lib/css/ie9.css" />
  <![endif]-->


  <!--스타일시트-->
  <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./lib/css/base.css" />
</head>
<body class="common-bg" data-page="page-weather">
  <!--[if lt IE 9]><div class="legacy-browser">
  <div class="legacy-pad"><p>현재 사용중인 브라우저는 지원이 중단된 브라우저입니다.<br> 원활한 온라인 서비스를 위해 브라우저를 <a href="http://windows.microsoft.com/ko-kr/internet-explorer/ie-11-worldwide-languages" target="_blank">최신 버전</a>으로 업데이트 해주시길 바랍니다.  </p></div>
  </div><![endif]-->
  <!-- 전체 타이틀 -->
  <h1 class="common-logo">LEECODER 20c</h1>
  <h2 class="common-title">LeeCoder's WEB UI weather apps</h2>

  <!-- 컨텐츠랩 UI 샘플 -->
  <div class="weather-wrap">
    <div class="today">
      <h3>현재 날씨</h3>
      <p><span class="temperature">온도: <span class="value"></span>℃</span></p>
      <p><span class="feels-like">체감 온도: <span class="value"></span>℃</span></p>
      <p><span class="humidity">습도: <span class="value"></span>%</span></p>
      <p><span class="weather">날씨: <span class="value"></span></span></p>
      <p><span class="desc">날씨설명: <span class="value"></span></span></p>
      <p><span class="img">이미지: <img src="" alt="" class="value"></span></p>
    </div>
    <div class="forecast eachHour">
      <h3>1시간 예보</h3>
      <div class="time time1">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time2">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time3">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time4">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time5">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time6">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time7">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time8">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time9">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time10">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time11">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time12">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>시</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
    </div>
    <div class="forecast daily">
      <h3>일별 예보</h3>
      <div class="time time1">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>일</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time2">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>일</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time3">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>일</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time4">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>일</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time5">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>일</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time6">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>일</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time7">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>일</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
      <div class="time time8">
        <p><span class="date"><span class="blind">시간</span><span class="value"></span>일</span></p>
        <p><span class="temperature"><span class="blind">온도</span><span class="value"></span>℃</span></p>
        <p><span class="weather-img"><span class="blind">날씨</span><img src="./lib/images/weather/icon/default.png" class="icon" draggable="false"></span></p>
        <p><span class="desc"><span class="blind">날씨설명</span><span class="value"></span></span></p>
        <p><span class="wind-speed"><span class="blind">풍속</span><span class="value"></span> 노트</span></p>
      </div>
    </div>
  </div>
  <script>
    /* api 정보 : https://openweathermap.org/forecast5 */
    var city = "Seoul";
    var lang = "kr";
    var geo = {lat:37.646809,lon:127.0580746};//노원구 *Todo 사용자 위치데이터 퍼미션 -> 조회
    var exclude = "alerts";//전체 보기
    var getForecastDay = function(UTC) {
      var utc = UTC*1000;
      var time = new Date(utc);
      return time.getDate();
    };
    var getForecastHour = function(UTC) {
      var utc = UTC*1000;
      var time = new Date(utc);
      return time.getHours();
    };
    var today = "https://api.openweathermap.org/data/2.5/weather?q="+city+"&appid="+"1c40f42436a06d02eff28e1526d29217"+"&lang="+lang;
    var onecall = "https://api.openweathermap.org/data/2.5/onecall?lat="+geo.lat+"&lon="+geo.lon+"&exclude="+exclude+"&appid="+"1c40f42436a06d02eff28e1526d29217"+"&lang="+lang;
    (function updateNow() {
      //현재 날씨
      $.ajax({
        url: today,
        dataType: "json",
        type: "GET",
        async: "false",
        success: function(resp) {
          //console.log(resp);
          $('.weather-wrap .today .temperature .value').text(parseInt(resp.main.temp - 273.15));//온도
          $('.weather-wrap .today .feels-like .value').text(parseInt(resp.main.feels_like - 273.15));//체감
          $('.weather-wrap .today .temperature-max .value').text(parseInt(resp.main.temp_max - 273.15));//최대
          $('.weather-wrap .today .temperature-min .value').text(parseInt(resp.main.temp_min - 273.15));//최저
          $('.weather-wrap .today .pressure .value').text(resp.main.pressure);//기압
          $('.weather-wrap .today .humidity .value').text(resp.main.humidity);//습도
          $('.weather-wrap .today .weather .value').text(resp.weather[0].main);//메인날씨
          $('.weather-wrap .today .desc .value').text(resp.weather[0].description);//설명
          $('.weather-wrap .today .img .value').attr('src', 'https://openweathermap.org/img/w/'+resp.weather[0].icon+'.png');//아이콘
          $('.weather-wrap .today .wind-deg .value').text(resp.wind.deg);//풍향
          $('.weather-wrap .today .wind-speed .value').text(resp.wind.speed);//풍속
          $('.weather-wrap .today .contry .value').text(resp.sys.country);//시
          $('.weather-wrap .today .city .value').text(resp.name);//도시
          $('.weather-wrap .today .cloud .value').text(resp.clouds.all);//구름
        }
      }).then(function() {
        setTimeout(updateNow, 6000000);//10분마다 실행
      });
    })();
    (function updateHourly() {
      //내일 날씨
      $.ajax({
        url: onecall,
        dataType: "json",
        type: "GET",
        async: "false",
        success: function(resp) {
          //console.log(resp);
          for (i=0;i<resp.hourly.length;i++) {
            $('.weather-wrap .forecast.eachHour .time'+i).find('.date .value').text(getForecastHour(resp.hourly[i].dt));
            $('.weather-wrap .forecast.eachHour .time'+i).find('.temperature .value').text(parseInt(resp.hourly[i].temp - 273.15));
            $('.weather-wrap .forecast.eachHour .time'+i).find('.weather-img .icon').attr('src', './lib/images/weather/icon/'+resp.hourly[i].weather[0].main+'.png');
            $('.weather-wrap .forecast.eachHour .time'+i).find('.desc .value').text(resp.hourly[i].weather[0].description);
            $('.weather-wrap .forecast.eachHour .time'+i).find('.wind-speed .value').text(resp.hourly[i].wind_speed);
          }
        }
      }).then(function() {
        setTimeout(updateHourly, 3600000);//60분마다 실행
      });
    })();
    (function updateOnecall() {
      //내일 날씨
      $.ajax({
        url: onecall,
        dataType: "json",
        type: "GET",
        async: "false",
        success: function(resp) {
          //console.log(resp);
          for (i=0;i<resp.daily.length;i++) {
            $('.weather-wrap .forecast.daily .time'+i).find('.date .value').text(getForecastDay(resp.daily[i].dt));
            $('.weather-wrap .forecast.daily .time'+i).find('.temperature .value').text(parseInt(resp.daily[i].temp.day - 273.15));
            $('.weather-wrap .forecast.daily .time'+i).find('.weather-img .icon').attr('src', './lib/images/weather/icon/'+resp.daily[i].weather[0].main+'.png');
            $('.weather-wrap .forecast.daily .time'+i).find('.desc .value').text(resp.daily[i].weather[0].description);
            $('.weather-wrap .forecast.daily .time'+i).find('.wind-speed .value').text(resp.daily[i].wind_speed);
          }
        }
      }).then(function() {
        setTimeout(updateOnecall, 7200000);//120분마다 실행
      });
    })();

    /*Descripttions 
      Snow
      Clouds
      Clear
      Rain
      Thunderstorm
      Drizzle
      Mist
      Smoke
      Haze
      Dust
      Fog
      Sand
      Ash
      Squall
      Tornado */
  </script>
</body>
</html>
